
BEGIN TRANSACTION;

-- Add primary keys
ALTER TABLE Album ADD CONSTRAINT PK_Album PRIMARY KEY (AlbumId);
ALTER TABLE Artist ADD CONSTRAINT PK_Artist PRIMARY KEY (ArtistId);
ALTER TABLE InvoiceLine ADD CONSTRAINT PK_InvoiceLine PRIMARY KEY (InvoiceLineId);
ALTER TABLE Customer ADD CONSTRAINT PK_Customer PRIMARY KEY (CustomerId);
ALTER TABLE Track ADD CONSTRAINT PK_Track PRIMARY KEY (TrackId);
ALTER TABLE Employee ADD CONSTRAINT PK_Employee PRIMARY KEY (EmployeeId);
ALTER TABLE Genre ADD CONSTRAINT PK_Genre PRIMARY KEY (GenreId);
ALTER TABLE Invoice ADD CONSTRAINT PK_Invoice PRIMARY KEY (InvoiceId);
ALTER TABLE MediaType ADD CONSTRAINT PK_MediaType PRIMARY KEY (MediaTypeId);
ALTER TABLE Playlist ADD CONSTRAINT PK_Playlist PRIMARY KEY (PlaylistId);
ALTER TABLE PlaylistTrack ADD CONSTRAINT PK_PlaylistTrack PRIMARY KEY (PlaylistId, TrackId);

-- Add foreign keys
ALTER TABLE Album ADD CONSTRAINT FK_Album_Artist FOREIGN KEY (ArtistId) REFERENCES Artist (ArtistId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE InvoiceLine ADD CONSTRAINT FK_InvoiceLine_Invoice FOREIGN KEY (InvoiceId) REFERENCES Invoice (InvoiceId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE InvoiceLine ADD CONSTRAINT FK_InvoiceLine_Track FOREIGN KEY (TrackId) REFERENCES Track (TrackId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE Customer ADD CONSTRAINT FK_Customer_SupportRep FOREIGN KEY (SupportRepId) REFERENCES Employee (EmployeeId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE Track ADD CONSTRAINT FK_Track_Album FOREIGN KEY (AlbumId) REFERENCES Album (AlbumId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE Track ADD CONSTRAINT FK_Track_Genre FOREIGN KEY (GenreId) REFERENCES Genre (GenreId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE Track ADD CONSTRAINT FK_Track_MediaType FOREIGN KEY (MediaTypeId) REFERENCES MediaType (MediaTypeId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE Employee ADD CONSTRAINT FK_Employee_ReportsTo FOREIGN KEY (ReportsTo) REFERENCES Employee (EmployeeId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE Invoice ADD CONSTRAINT FK_Invoice_Customer FOREIGN KEY (CustomerId) REFERENCES Customer (CustomerId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE PlaylistTrack ADD CONSTRAINT FK_PlaylistTrack_Playlist FOREIGN KEY (PlaylistId) REFERENCES Playlist (PlaylistId) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE PlaylistTrack ADD CONSTRAINT FK_PlaylistTrack_Track FOREIGN KEY (TrackId) REFERENCES Track (TrackId) ON DELETE NO ACTION ON UPDATE NO ACTION;



CREATE INDEX IFK_AlbumArtistId ON Album (ArtistId);
CREATE INDEX IFK_CustomerSupportRepId ON Customer (SupportRepId);
CREATE INDEX IFK_EmployeeReportsTo ON Employee (ReportsTo);
CREATE INDEX IFK_InvoiceCustomerId ON Invoice (CustomerId);
CREATE INDEX IFK_InvoiceLineInvoiceId ON InvoiceLine (InvoiceId);
CREATE INDEX IFK_InvoiceLineTrackId ON InvoiceLine (TrackId);
CREATE INDEX IFK_PlaylistTrackTrackId ON PlaylistTrack (TrackId);
CREATE INDEX IFK_TrackAlbumId ON Track (AlbumId);
CREATE INDEX IFK_TrackGenreId ON Track (GenreId);
CREATE INDEX IFK_TrackMediaTypeId ON Track (MediaTypeId);
COMMIT;
